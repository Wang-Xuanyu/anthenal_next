import{r as m,j as a,L as c,s as o}from"./Home-DmwyrfO4.js";function x({ctx:e}){const[r,n]=m.useState(!1),s=e.book||e.books.find(({name:t})=>t==e.last.bookid),{start:p,pause:h}=e.downloads.commands;return a.jsxs("div",{className:"",children:[a.jsxs(c,{onClick:()=>{e.last.chapterid||(e.last.chapterid=s.chapters.find(t=>t.exist).name),!(s.name==e.last.bookid&&e.last.chapterid)&&o("last",{chapterid:e.last.chapterid,bookid:s.name})},href:"/chapter",className:"w-full flex flex-col place-items-center place-content-center py-24 bg-black/70 space-y-4",children:[a.jsx("div",{className:"w-[30%] ",children:a.jsx("div",{style:{paddingTop:"100%",backgroundImage:`url(/assets/images/${s.cover})`},className:"rounded-full w-full",alt:`${s.name}封面`})}),a.jsxs("div",{className:"font-semibold text-white",children:[s.name," (",s.chapters.length,"回)"]}),s.chapters.find(t=>t.exist)&&a.jsx("div",{className:"rounded-full border-slate-400 border-2 px-8 text-lg text-white font-bold",children:"开始播放"})]}),a.jsxs("div",{className:"bg-slate-400/80 py-12 px-4",children:[s.chapters.find((t,i)=>!t.exist)&&a.jsx("div",{onClick:()=>{if(r){h(),n(!1);return}p(s),n(!0)},className:"flex place-content-center",children:a.jsxs("div",{className:"animate-pulse p-[3px] px-8 text-lg text-white cursor-pointer bg-green-400 rounded-full text-center",children:[a.jsxs("div",{className:"text-green-800",children:[" ",s.chapters.length," - ",s.chapters.filter(t=>t.exist).length,"回"]}),"等待下载 ",a.jsx("div",{className:`underline ${r?"animate-pin":""}`,children:r?"暂停":"开始"})]})}),a.jsx("div",{className:"grid grid-cols-3  py-8 px-4 place-items-center place-content-center",children:s.chapters.map((t,i)=>{const{name:l,url:u,exist:d}=t;return a.jsx("div",{className:"w-full text-center",children:a.jsx(c,{className:`${d?"":"text-green-300"}`,onClick:()=>{if(!d)return!0;e.last.bookid==s.name&&e.last.chapterid==l||(e.audio.current.paused||e.audio.current.pause(),e.book=s,e.chapter=t,e.last.bookid=s.name,e.last.chapterid=t.name,o("last",{chapterid:l,bookid:s.name}))},href:"/chapter",children:l})},i)})})]})]})}export{x as default};
